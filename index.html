<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TractionJackson - MVP Traction Bot</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-hover: #1a1a25;
            --border: #2a2a3a;
            --text-primary: #ffffff;
            --text-secondary: #8b8b9e;
            --accent-green: #00ff88;
            --accent-green-dim: #00cc6a;
            --accent-red: #ff4757;
            --accent-yellow: #ffd93d;
            --accent-blue: #4dabf7;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 32px;
            padding: 0 8px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-text span {
            color: var(--accent-green);
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            padding: 0 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .nav-item:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(0, 255, 136, 0.1);
            color: var(--accent-green);
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--accent-green);
            color: var(--bg-dark);
            font-size: 11px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 15px;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 4px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
        }

        .stat-value.green { color: var(--accent-green); }
        .stat-value.red { color: var(--accent-red); }
        .stat-value.yellow { color: var(--accent-yellow); }
        .stat-value.blue { color: var(--accent-blue); }

        .stat-change {
            font-size: 12px;
            margin-top: 4px;
        }

        .stat-change.positive { color: var(--accent-green); }
        .stat-change.negative { color: var(--accent-red); }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent-green);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-hint {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-primary {
            background: var(--accent-green);
            color: var(--bg-dark);
        }

        .btn-primary:hover {
            background: var(--accent-green-dim);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-card-hover);
        }

        .btn-danger {
            background: rgba(255, 71, 87, 0.1);
            color: var(--accent-red);
        }

        .btn-danger:hover {
            background: rgba(255, 71, 87, 0.2);
        }

        /* Tags */
        .tag {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .tag-green {
            background: rgba(0, 255, 136, 0.1);
            color: var(--accent-green);
        }

        .tag-yellow {
            background: rgba(255, 217, 61, 0.1);
            color: var(--accent-yellow);
        }

        .tag-red {
            background: rgba(255, 71, 87, 0.1);
            color: var(--accent-red);
        }

        .tag-blue {
            background: rgba(77, 171, 247, 0.1);
            color: var(--accent-blue);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        td {
            font-size: 14px;
        }

        tr:hover {
            background: var(--bg-card-hover);
        }

        /* Output Blocks */
        .output-block {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .output-block pre {
            white-space: pre-wrap;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .output-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .output-title {
            font-weight: 600;
            font-size: 14px;
        }

        .copy-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 4px;
            background: var(--bg-dark);
            padding: 4px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .tab {
            flex: 1;
            padding: 10px 20px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            background: var(--bg-card);
            color: var(--accent-green);
        }

        /* Experiment Card */
        .experiment-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .experiment-card:hover {
            border-color: var(--accent-green);
        }

        .experiment-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .experiment-name {
            font-size: 16px;
            font-weight: 600;
        }

        .experiment-meta {
            display: flex;
            gap: 16px;
            color: var(--text-secondary);
            font-size: 13px;
        }

        /* Progress Bar */
        .progress-bar {
            height: 6px;
            background: var(--bg-dark);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-green);
            border-radius: 3px;
            transition: width 0.3s;
        }

        /* Creative Card */
        .creative-card {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .creative-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .creative-type {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--accent-blue);
        }

        .creative-content {
            font-size: 14px;
            line-height: 1.6;
        }

        /* Funnel Visualization */
        .funnel-step {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }

        .funnel-step:last-child {
            border-bottom: none;
        }

        .funnel-number {
            width: 32px;
            height: 32px;
            background: var(--bg-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }

        .funnel-info {
            flex: 1;
        }

        .funnel-name {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .funnel-rate {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .funnel-value {
            font-size: 24px;
            font-weight: 700;
        }

        /* Decision Card */
        .decision-card {
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .decision-verdict {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .decision-verdict.winner { color: var(--accent-green); }
        .decision-verdict.loser { color: var(--accent-red); }
        .decision-verdict.inconclusive { color: var(--accent-yellow); }

        .decision-reason {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // ========================================
        // DATA MODELS & STORAGE
        // ========================================

        const STORAGE_KEY = 'tractionjackson_data';

        const defaultData = {
            experiments: [],
            creatives: [],
            campaigns: [],
            funnelData: [],
            decisions: []
        };

        // SlotFillr seed experiment
        const slotFillrSeed = {
            id: 'exp_slotfillr_001',
            name: 'SlotFillr MVP Validation',
            product: 'SlotFillr.ai',
            status: 'active',
            createdAt: new Date().toISOString(),
            icp: 'Appointment-based businesses (med spas, salons, PT clinics, dental offices)',
            corePromise: 'Automatically fill empty appointment slots with AI',
            cta: 'Join the private beta',
            landingPage: 'slotfillr.ai',
            hypotheses: [
                { id: 'h1', name: 'Pain Framing', description: 'Lead with the pain of empty slots and lost revenue' },
                { id: 'h2', name: 'Automation Framing', description: 'Lead with "AI does it for you" automation angle' },
                { id: 'h3', name: 'Loss Aversion', description: 'Lead with specific dollar amounts being lost daily' }
            ],
            budget: {
                daily: 50,
                total: 500,
                cpaTarget: 15
            },
            successMetrics: {
                primary: 'Cost per qualified beta signup (email + phone)',
                secondary: [
                    'Page ‚Üí AI engagement rate',
                    'AI ‚Üí revenue calc completion',
                    'Revenue calc ‚Üí contact info submission'
                ]
            },
            killRules: [
                'CPA > $30 after $100 spend',
                'CTR < 0.5% after 10k impressions',
                'AI engagement < 20% after 100 page views'
            ],
            iterateRules: [
                'CPA between $15-$30: iterate on creative',
                'High CTR but low conversion: iterate on landing page',
                'Single hook family winning: double down and test variants'
            ]
        };

        function loadData() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) {
                    const data = JSON.parse(stored);
                    // Ensure SlotFillr experiment exists
                    if (!data.experiments.find(e => e.id === slotFillrSeed.id)) {
                        data.experiments.unshift(slotFillrSeed);
                    }
                    return data;
                }
            } catch (e) {
                console.error('Error loading data:', e);
            }
            return { ...defaultData, experiments: [slotFillrSeed] };
        }

        function saveData(data) {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            } catch (e) {
                console.error('Error saving data:', e);
            }
        }

        // ========================================
        // ICONS
        // ========================================

        const Icons = {
            Dashboard: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <rect x="3" y="3" width="7" height="7" rx="1"/>
                    <rect x="14" y="3" width="7" height="7" rx="1"/>
                    <rect x="14" y="14" width="7" height="7" rx="1"/>
                    <rect x="3" y="14" width="7" height="7" rx="1"/>
                </svg>
            ),
            Experiment: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M9 3h6M12 3v6M5 21h14a2 2 0 0 0 1.7-3l-6-9H9.3l-6 9A2 2 0 0 0 5 21z"/>
                </svg>
            ),
            Creative: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
            ),
            Campaign: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                </svg>
            ),
            Funnel: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"/>
                </svg>
            ),
            Decision: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
            ),
            Plus: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
            ),
            Copy: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <rect x="9" y="9" width="13" height="13" rx="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                </svg>
            ),
            Check: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polyline points="20 6 9 17 4 12"/>
                </svg>
            ),
            ArrowRight: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <line x1="5" y1="12" x2="19" y2="12"/>
                    <polyline points="12 5 19 12 12 19"/>
                </svg>
            ),
            TrendUp: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                    <polyline points="17 6 23 6 23 12"/>
                </svg>
            ),
            TrendDown: () => (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/>
                    <polyline points="17 18 23 18 23 12"/>
                </svg>
            )
        };

        // ========================================
        // CREATIVE GENERATION ENGINE
        // ========================================

        const hookFamilies = {
            pain: {
                name: 'Pain Framing',
                hooks: [
                    "Your appointment book has holes in it. I can see them from here.",
                    "That empty 2pm slot? It's not coming back.",
                    "Every no-show costs you $150. How many did you have this week?",
                    "You're running a business with Swiss cheese scheduling.",
                    "Empty slots don't reschedule themselves."
                ]
            },
            automation: {
                name: 'Automation Framing',
                hooks: [
                    "What if your calendar filled itself?",
                    "AI just booked 3 appointments while you read this.",
                    "Stop chasing patients. Let the AI do it.",
                    "Your front desk can't text 50 people at once. AI can.",
                    "Automatic slot-filling is here. Your competitors know."
                ]
            },
            loss: {
                name: 'Loss Aversion',
                hooks: [
                    "Med spas lose $4,200/month to empty slots. What's your number?",
                    "$127 vanished at 3pm yesterday. You didn't notice.",
                    "10 empty slots √ó $150 = $1,500 gone. Every. Single. Week.",
                    "You're paying rent on chairs nobody's sitting in.",
                    "That cancellation just cost you a car payment."
                ]
            },
            social: {
                name: 'Social Proof',
                hooks: [
                    "47 clinics filled 2,000+ slots last month. Automatically.",
                    "The salon down the street just stopped losing money.",
                    "Smart med spas don't have empty slots anymore.",
                    "Your competitor's calendar is full. Here's why.",
                    "Appointment-based businesses are switching. Fast."
                ]
            },
            curiosity: {
                name: 'Curiosity Gap',
                hooks: [
                    "I found out why your slots stay empty. It's not what you think.",
                    "The real reason patients ghost you.",
                    "What top-earning clinics do differently with cancellations.",
                    "The $4,000 mistake most med spas make every month.",
                    "Why your reminder texts aren't working anymore."
                ]
            }
        };

        function generateScript(hook, product, cta) {
            return {
                hook: hook,
                body: `Here's the thing: ${product} uses AI to automatically reach out to your waitlist the moment a slot opens. No more manual texting. No more phone tag. The system fills the gap before you even notice it's there.`,
                cta: `Tap the link to see how much revenue you're leaving on the table. ${cta}.`,
                duration: '12-15 seconds',
                tone: 'Direct, slightly urgent, no hype',
                pov: 'Speaking directly to business owner'
            };
        }

        function generateTextOnScreen(hook) {
            const words = hook.split(' ');
            if (words.length <= 6) return [hook];

            const mid = Math.ceil(words.length / 2);
            return [
                words.slice(0, mid).join(' '),
                words.slice(mid).join(' ')
            ];
        }

        // ========================================
        // CAMPAIGN STRUCTURE GENERATOR
        // ========================================

        function generateCampaignSpec(experiment, selectedHooks) {
            const campaignName = `TJ_${experiment.product.replace(/[^a-zA-Z]/g, '')}_${new Date().toISOString().slice(0,10)}`;

            return {
                platform: 'Meta Ads / TikTok Ads',
                campaignName: campaignName,
                objective: 'Conversions (Lead Generation)',
                budget: {
                    type: 'Daily',
                    amount: experiment.budget.daily,
                    allocation: 'Automatic (CBO)'
                },
                adSets: selectedHooks.map((hookFamily, idx) => ({
                    name: `${campaignName}_${hookFamily.replace(/\s/g, '')}`,
                    targeting: {
                        type: 'Broad + Interest Layering',
                        interests: [
                            'Small business owners',
                            'Medical spa',
                            'Salon owner',
                            'Healthcare practice management',
                            'Appointment scheduling software'
                        ],
                        demographics: {
                            age: '25-55',
                            locations: 'United States'
                        }
                    },
                    placements: ['Reels', 'Stories', 'Feed'],
                    creatives: hookFamilies[hookFamily.toLowerCase().replace(/\s/g, '')]?.hooks.slice(0, 3) || []
                })),
                namingConvention: {
                    campaign: 'TJ_[Product]_[Date]',
                    adSet: '[Campaign]_[HookFamily]',
                    ad: '[AdSet]_[HookVariant]_v[Version]'
                },
                rotationRules: [
                    'Start with 3 creatives per ad set',
                    'Kill creative if CPA > 2x target after $30 spend',
                    'Duplicate winning creative with variation after $50 profitable spend',
                    'Rotate new hooks weekly regardless of performance'
                ]
            };
        }

        // ========================================
        // DECISION ENGINE
        // ========================================

        function analyzeResults(funnelData, experiment) {
            if (!funnelData || funnelData.length === 0) {
                return {
                    verdict: 'insufficient_data',
                    message: 'Not enough data to make a decision. Need at least 100 page views.',
                    recommendations: ['Continue running the experiment', 'Ensure tracking is working correctly']
                };
            }

            const latest = funnelData[funnelData.length - 1];
            const cpa = latest.spend / Math.max(latest.conversions, 1);
            const ctr = (latest.clicks / Math.max(latest.impressions, 1)) * 100;
            const aiEngagement = (latest.aiInteractions / Math.max(latest.pageViews, 1)) * 100;
            const calcCompletion = (latest.calcCompleted / Math.max(latest.aiInteractions, 1)) * 100;
            const submitRate = (latest.conversions / Math.max(latest.calcCompleted, 1)) * 100;

            const analysis = {
                metrics: { cpa, ctr, aiEngagement, calcCompletion, submitRate },
                hookPerformance: latest.hookPerformance || {},
                verdict: 'inconclusive',
                confidence: 'low',
                learnings: [],
                recommendations: []
            };

            // Determine verdict
            if (cpa <= experiment.budget.cpaTarget) {
                analysis.verdict = 'winner';
                analysis.confidence = cpa <= experiment.budget.cpaTarget * 0.7 ? 'high' : 'medium';
                analysis.learnings.push(`CPA of $${cpa.toFixed(2)} beats target of $${experiment.budget.cpaTarget}`);
            } else if (cpa > experiment.budget.cpaTarget * 2) {
                analysis.verdict = 'loser';
                analysis.confidence = 'high';
                analysis.learnings.push(`CPA of $${cpa.toFixed(2)} is 2x+ over target. Consider killing.`);
            } else {
                analysis.verdict = 'iterate';
                analysis.learnings.push(`CPA of $${cpa.toFixed(2)} is above target but improvable.`);
            }

            // Funnel analysis
            if (ctr < 0.5) {
                analysis.learnings.push('Low CTR suggests hooks aren\'t resonating. Test new angles.');
                analysis.recommendations.push('Try more provocative or specific hooks');
            }

            if (aiEngagement < 30) {
                analysis.learnings.push('Users arriving but not engaging with AI. Page may not be compelling.');
                analysis.recommendations.push('Review landing page above-the-fold content');
            }

            if (calcCompletion < 50 && aiEngagement > 30) {
                analysis.learnings.push('Users start AI but don\'t complete calc. Friction in the flow.');
                analysis.recommendations.push('Simplify the revenue calculator interaction');
            }

            if (submitRate < 30 && calcCompletion > 50) {
                analysis.learnings.push('Users complete calc but don\'t submit. Value prop may not land.');
                analysis.recommendations.push('Strengthen the post-calculation CTA and value reveal');
            }

            // Hook family analysis
            if (latest.hookPerformance) {
                const sorted = Object.entries(latest.hookPerformance)
                    .sort((a, b) => b[1].conversions - a[1].conversions);

                if (sorted.length > 0) {
                    analysis.learnings.push(`Best performing hook family: ${sorted[0][0]}`);
                    if (sorted.length > 1 && sorted[sorted.length - 1][1].conversions === 0) {
                        analysis.recommendations.push(`Consider killing ${sorted[sorted.length - 1][0]} hooks`);
                    }
                }
            }

            return analysis;
        }

        // ========================================
        // COMPONENTS
        // ========================================

        // Sidebar Navigation
        function Sidebar({ currentPage, setCurrentPage, experimentCount }) {
            const navItems = [
                { id: 'dashboard', label: 'Dashboard', icon: Icons.Dashboard },
                { id: 'experiments', label: 'Experiments', icon: Icons.Experiment, badge: experimentCount },
                { id: 'creatives', label: 'Creative Engine', icon: Icons.Creative },
                { id: 'campaigns', label: 'Campaign Builder', icon: Icons.Campaign },
                { id: 'funnel', label: 'Funnel Tracker', icon: Icons.Funnel },
                { id: 'decisions', label: 'Decision Engine', icon: Icons.Decision }
            ];

            return (
                <div className="sidebar">
                    <div className="logo">
                        <div className="logo-icon">TJ</div>
                        <div className="logo-text">Traction<span>Jackson</span></div>
                    </div>

                    <div className="nav-section">
                        <div className="nav-label">Core</div>
                        {navItems.map(item => (
                            <div
                                key={item.id}
                                className={`nav-item ${currentPage === item.id ? 'active' : ''}`}
                                onClick={() => setCurrentPage(item.id)}
                            >
                                <item.icon />
                                {item.label}
                                {item.badge && <span className="nav-badge">{item.badge}</span>}
                            </div>
                        ))}
                    </div>

                    <div style={{ marginTop: 'auto', padding: '16px', borderTop: '1px solid var(--border)' }}>
                        <div style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>
                            MVP Traction Bot v1.0
                        </div>
                        <div style={{ fontSize: '11px', color: 'var(--text-secondary)', marginTop: '4px' }}>
                            Optimize for learning, not vanity.
                        </div>
                    </div>
                </div>
            );
        }

        // Dashboard Page
        function DashboardPage({ data, setCurrentPage }) {
            const activeExperiments = data.experiments.filter(e => e.status === 'active');
            const latestFunnel = data.funnelData[data.funnelData.length - 1] || {
                impressions: 0, clicks: 0, pageViews: 0, conversions: 0, spend: 0
            };

            const cpa = latestFunnel.conversions > 0
                ? (latestFunnel.spend / latestFunnel.conversions).toFixed(2)
                : '‚Äî';
            const ctr = latestFunnel.impressions > 0
                ? ((latestFunnel.clicks / latestFunnel.impressions) * 100).toFixed(2)
                : '‚Äî';

            return (
                <div>
                    <div className="page-header">
                        <h1 className="page-title">Dashboard</h1>
                        <p className="page-subtitle">Traction experiment overview for your MVPs</p>
                    </div>

                    <div className="stats-grid">
                        <div className="stat-card">
                            <div className="stat-label">Active Experiments</div>
                            <div className="stat-value blue">{activeExperiments.length}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">Total Spend</div>
                            <div className="stat-value">${latestFunnel.spend || 0}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">Conversions</div>
                            <div className="stat-value green">{latestFunnel.conversions || 0}</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-label">Cost per Signup</div>
                            <div className="stat-value yellow">${cpa}</div>
                        </div>
                    </div>

                    <div className="grid-2">
                        <div className="card">
                            <div className="card-header">
                                <div>
                                    <h3 className="card-title">Active Experiments</h3>
                                    <p className="card-subtitle">Currently running traction tests</p>
                                </div>
                                <button className="btn btn-primary" onClick={() => setCurrentPage('experiments')}>
                                    <Icons.Plus /> New
                                </button>
                            </div>

                            {activeExperiments.length === 0 ? (
                                <div className="empty-state">
                                    <div className="empty-state-icon">üß™</div>
                                    <div className="empty-state-title">No active experiments</div>
                                    <p>Create your first traction experiment</p>
                                </div>
                            ) : (
                                activeExperiments.map(exp => (
                                    <div key={exp.id} className="experiment-card" onClick={() => setCurrentPage('experiments')}>
                                        <div className="experiment-card-header">
                                            <div>
                                                <div className="experiment-name">{exp.name}</div>
                                                <div style={{ color: 'var(--text-secondary)', fontSize: '13px', marginTop: '4px' }}>
                                                    {exp.product}
                                                </div>
                                            </div>
                                            <span className="tag tag-green">Active</span>
                                        </div>
                                        <div className="experiment-meta">
                                            <span>Budget: ${exp.budget.daily}/day</span>
                                            <span>Target CPA: ${exp.budget.cpaTarget}</span>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>

                        <div className="card">
                            <div className="card-header">
                                <div>
                                    <h3 className="card-title">Quick Actions</h3>
                                    <p className="card-subtitle">Jump into the workflow</p>
                                </div>
                            </div>

                            <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                <button className="btn btn-secondary" style={{ justifyContent: 'space-between' }} onClick={() => setCurrentPage('creatives')}>
                                    Generate New Hooks <Icons.ArrowRight />
                                </button>
                                <button className="btn btn-secondary" style={{ justifyContent: 'space-between' }} onClick={() => setCurrentPage('campaigns')}>
                                    Build Campaign Spec <Icons.ArrowRight />
                                </button>
                                <button className="btn btn-secondary" style={{ justifyContent: 'space-between' }} onClick={() => setCurrentPage('funnel')}>
                                    Log Funnel Data <Icons.ArrowRight />
                                </button>
                                <button className="btn btn-secondary" style={{ justifyContent: 'space-between' }} onClick={() => setCurrentPage('decisions')}>
                                    Analyze Results <Icons.ArrowRight />
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div>
                                <h3 className="card-title">System Philosophy</h3>
                                <p className="card-subtitle">How TractionJackson thinks</p>
                            </div>
                        </div>
                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '20px' }}>
                            <div>
                                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '8px', color: 'var(--accent-green)' }}>
                                    Learning Velocity
                                </div>
                                <div style={{ fontSize: '13px', color: 'var(--text-secondary)', lineHeight: '1.6' }}>
                                    Optimize for validated learning per dollar spent, not vanity metrics.
                                </div>
                            </div>
                            <div>
                                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '8px', color: 'var(--accent-blue)' }}>
                                    Depth Over Breadth
                                </div>
                                <div style={{ fontSize: '13px', color: 'var(--text-secondary)', lineHeight: '1.6' }}>
                                    Focus on TikTok + Instagram only. Master two channels before expanding.
                                </div>
                            </div>
                            <div>
                                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '8px', color: 'var(--accent-yellow)' }}>
                                    No Assumptions
                                </div>
                                <div style={{ fontSize: '13px', color: 'var(--text-secondary)', lineHeight: '1.6' }}>
                                    Don't assume the product is good. Let behavior decide.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Experiments Page
        function ExperimentsPage({ data, setData }) {
            const [selectedExperiment, setSelectedExperiment] = useState(null);
            const [isCreating, setIsCreating] = useState(false);
            const [formData, setFormData] = useState({
                name: '',
                product: '',
                icp: '',
                corePromise: '',
                cta: '',
                landingPage: '',
                dailyBudget: 50,
                totalBudget: 500,
                cpaTarget: 15,
                hypotheses: ''
            });

            const handleCreate = () => {
                const newExperiment = {
                    id: `exp_${Date.now()}`,
                    name: formData.name,
                    product: formData.product,
                    status: 'active',
                    createdAt: new Date().toISOString(),
                    icp: formData.icp,
                    corePromise: formData.corePromise,
                    cta: formData.cta,
                    landingPage: formData.landingPage,
                    hypotheses: formData.hypotheses.split('\n').filter(h => h.trim()).map((h, i) => ({
                        id: `h${i + 1}`,
                        name: h.split(':')[0] || h,
                        description: h.split(':')[1] || h
                    })),
                    budget: {
                        daily: parseInt(formData.dailyBudget),
                        total: parseInt(formData.totalBudget),
                        cpaTarget: parseInt(formData.cpaTarget)
                    },
                    successMetrics: {
                        primary: 'Cost per qualified signup (email + phone)',
                        secondary: ['Page ‚Üí engagement rate', 'Engagement ‚Üí conversion']
                    },
                    killRules: [
                        `CPA > $${formData.cpaTarget * 2} after $100 spend`,
                        'CTR < 0.5% after 10k impressions'
                    ],
                    iterateRules: [
                        `CPA between $${formData.cpaTarget}-$${formData.cpaTarget * 2}: iterate on creative`
                    ]
                };

                const newData = {
                    ...data,
                    experiments: [...data.experiments, newExperiment]
                };
                setData(newData);
                saveData(newData);
                setIsCreating(false);
                setFormData({
                    name: '', product: '', icp: '', corePromise: '', cta: '', landingPage: '',
                    dailyBudget: 50, totalBudget: 500, cpaTarget: 15, hypotheses: ''
                });
            };

            if (selectedExperiment) {
                const exp = data.experiments.find(e => e.id === selectedExperiment);
                return (
                    <div>
                        <div className="page-header">
                            <button className="btn btn-secondary" onClick={() => setSelectedExperiment(null)} style={{ marginBottom: '16px' }}>
                                ‚Üê Back to Experiments
                            </button>
                            <h1 className="page-title">{exp.name}</h1>
                            <p className="page-subtitle">{exp.product}</p>
                        </div>

                        <div className="grid-2">
                            <div className="card">
                                <h3 className="card-title" style={{ marginBottom: '16px' }}>Experiment Definition</h3>
                                <div className="form-group">
                                    <div className="form-label">ICP (Ideal Customer Profile)</div>
                                    <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px', fontSize: '14px' }}>
                                        {exp.icp}
                                    </div>
                                </div>
                                <div className="form-group">
                                    <div className="form-label">Core Promise</div>
                                    <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px', fontSize: '14px' }}>
                                        {exp.corePromise}
                                    </div>
                                </div>
                                <div className="form-group">
                                    <div className="form-label">CTA</div>
                                    <div style={{ padding: '12px', background: 'var(--bg-dark)', borderRadius: '8px', fontSize: '14px' }}>
                                        {exp.cta}
                                    </div>
                                </div>
                            </div>

                            <div className="card">
                                <h3 className="card-title" style={{ marginBottom: '16px' }}>Budget & Targets</h3>
                                <div className="stats-grid" style={{ gridTemplateColumns: 'repeat(3, 1fr)' }}>
                                    <div className="stat-card">
                                        <div className="stat-label">Daily Budget</div>
                                        <div className="stat-value">${exp.budget.daily}</div>
                                    </div>
                                    <div className="stat-card">
                                        <div className="stat-label">Total Budget</div>
                                        <div className="stat-value">${exp.budget.total}</div>
                                    </div>
                                    <div className="stat-card">
                                        <div className="stat-label">Target CPA</div>
                                        <div className="stat-value green">${exp.budget.cpaTarget}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="card">
                            <h3 className="card-title" style={{ marginBottom: '16px' }}>Hypotheses to Test</h3>
                            <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                {exp.hypotheses.map(h => (
                                    <div key={h.id} className="creative-card">
                                        <div className="creative-type">{h.name}</div>
                                        <div className="creative-content">{h.description}</div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="grid-2">
                            <div className="card">
                                <h3 className="card-title" style={{ marginBottom: '16px', color: 'var(--accent-red)' }}>Kill Rules</h3>
                                <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                    {exp.killRules.map((rule, i) => (
                                        <li key={i} style={{ padding: '12px', background: 'rgba(255,71,87,0.1)', borderRadius: '8px', fontSize: '14px' }}>
                                            {rule}
                                        </li>
                                    ))}
                                </ul>
                            </div>
                            <div className="card">
                                <h3 className="card-title" style={{ marginBottom: '16px', color: 'var(--accent-yellow)' }}>Iterate Rules</h3>
                                <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                    {exp.iterateRules.map((rule, i) => (
                                        <li key={i} style={{ padding: '12px', background: 'rgba(255,217,61,0.1)', borderRadius: '8px', fontSize: '14px' }}>
                                            {rule}
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    </div>
                );
            }

            if (isCreating) {
                return (
                    <div>
                        <div className="page-header">
                            <h1 className="page-title">New Experiment</h1>
                            <p className="page-subtitle">Define a traction experiment for your MVP</p>
                        </div>

                        <div className="card">
                            <div className="grid-2">
                                <div className="form-group">
                                    <label className="form-label">Experiment Name</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        placeholder="e.g., SlotFillr MVP Validation"
                                        value={formData.name}
                                        onChange={e => setFormData({...formData, name: e.target.value})}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Product Name</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        placeholder="e.g., SlotFillr.ai"
                                        value={formData.product}
                                        onChange={e => setFormData({...formData, product: e.target.value})}
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">ICP (Ideal Customer Profile)</label>
                                <textarea
                                    className="form-textarea"
                                    placeholder="Describe your target customer in detail..."
                                    value={formData.icp}
                                    onChange={e => setFormData({...formData, icp: e.target.value})}
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Core Promise</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    placeholder="The main value proposition in one sentence"
                                    value={formData.corePromise}
                                    onChange={e => setFormData({...formData, corePromise: e.target.value})}
                                />
                            </div>

                            <div className="grid-2">
                                <div className="form-group">
                                    <label className="form-label">CTA</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        placeholder="e.g., Join the private beta"
                                        value={formData.cta}
                                        onChange={e => setFormData({...formData, cta: e.target.value})}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Landing Page URL</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        placeholder="e.g., slotfillr.ai"
                                        value={formData.landingPage}
                                        onChange={e => setFormData({...formData, landingPage: e.target.value})}
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Hypotheses to Test (one per line, format: Name: Description)</label>
                                <textarea
                                    className="form-textarea"
                                    placeholder="Pain Framing: Lead with the pain of empty slots&#10;Automation: Lead with AI does it for you&#10;Loss Aversion: Lead with specific dollar amounts"
                                    value={formData.hypotheses}
                                    onChange={e => setFormData({...formData, hypotheses: e.target.value})}
                                    style={{ minHeight: '120px' }}
                                />
                            </div>

                            <div className="grid-3">
                                <div className="form-group">
                                    <label className="form-label">Daily Budget ($)</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.dailyBudget}
                                        onChange={e => setFormData({...formData, dailyBudget: e.target.value})}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Total Budget ($)</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.totalBudget}
                                        onChange={e => setFormData({...formData, totalBudget: e.target.value})}
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Target CPA ($)</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.cpaTarget}
                                        onChange={e => setFormData({...formData, cpaTarget: e.target.value})}
                                    />
                                </div>
                            </div>

                            <div style={{ display: 'flex', gap: '12px', marginTop: '24px' }}>
                                <button className="btn btn-primary" onClick={handleCreate}>
                                    Create Experiment
                                </button>
                                <button className="btn btn-secondary" onClick={() => setIsCreating(false)}>
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div>
                    <div className="page-header">
                        <h1 className="page-title">Experiments</h1>
                        <p className="page-subtitle">Define and manage traction experiments</p>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div>
                                <h3 className="card-title">All Experiments</h3>
                                <p className="card-subtitle">{data.experiments.length} total experiments</p>
                            </div>
                            <button className="btn btn-primary" onClick={() => setIsCreating(true)}>
                                <Icons.Plus /> New Experiment
                            </button>
                        </div>

                        {data.experiments.map(exp => (
                            <div key={exp.id} className="experiment-card" onClick={() => setSelectedExperiment(exp.id)}>
                                <div className="experiment-card-header">
                                    <div>
                                        <div className="experiment-name">{exp.name}</div>
                                        <div style={{ color: 'var(--text-secondary)', fontSize: '13px', marginTop: '4px' }}>
                                            {exp.product} ‚Ä¢ {exp.icp.substring(0, 50)}...
                                        </div>
                                    </div>
                                    <span className={`tag tag-${exp.status === 'active' ? 'green' : exp.status === 'paused' ? 'yellow' : 'blue'}`}>
                                        {exp.status}
                                    </span>
                                </div>
                                <div className="experiment-meta">
                                    <span>Budget: ${exp.budget.daily}/day</span>
                                    <span>Target CPA: ${exp.budget.cpaTarget}</span>
                                    <span>{exp.hypotheses.length} hypotheses</span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Creative Engine Page
        function CreativeEnginePage({ data }) {
            const [selectedExperiment, setSelectedExperiment] = useState(data.experiments[0]?.id || '');
            const [selectedFamilies, setSelectedFamilies] = useState(['pain', 'automation', 'loss']);
            const [generatedCreatives, setGeneratedCreatives] = useState([]);
            const [copiedIndex, setCopiedIndex] = useState(null);

            const experiment = data.experiments.find(e => e.id === selectedExperiment);

            const handleGenerate = () => {
                const creatives = [];
                selectedFamilies.forEach(familyKey => {
                    const family = hookFamilies[familyKey];
                    if (family) {
                        family.hooks.forEach((hook, idx) => {
                            const script = generateScript(hook, experiment?.product || 'Product', experiment?.cta || 'Sign up');
                            creatives.push({
                                id: `${familyKey}_${idx}`,
                                family: family.name,
                                familyKey: familyKey,
                                hook: hook,
                                script: script,
                                textOnScreen: generateTextOnScreen(hook)
                            });
                        });
                    }
                });
                setGeneratedCreatives(creatives);
            };

            const copyToClipboard = (text, index) => {
                navigator.clipboard.writeText(text);
                setCopiedIndex(index);
                setTimeout(() => setCopiedIndex(null), 2000);
            };

            return (
                <div>
                    <div className="page-header">
                        <h1 className="page-title">Creative Generation Engine</h1>
                        <p className="page-subtitle">Generate hooks and scripts for TikTok & Instagram Reels</p>
                    </div>

                    <div className="card">
                        <h3 className="card-title" style={{ marginBottom: '16px' }}>Configuration</h3>

                        <div className="grid-2">
                            <div className="form-group">
                                <label className="form-label">Select Experiment</label>
                                <select
                                    className="form-select"
                                    value={selectedExperiment}
                                    onChange={e => setSelectedExperiment(e.target.value)}
                                >
                                    {data.experiments.map(exp => (
                                        <option key={exp.id} value={exp.id}>{exp.name}</option>
                                    ))}
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Hook Families (select multiple)</label>
                                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                                    {Object.entries(hookFamilies).map(([key, family]) => (
                                        <button
                                            key={key}
                                            className={`tag ${selectedFamilies.includes(key) ? 'tag-green' : ''}`}
                                            style={{
                                                cursor: 'pointer',
                                                border: selectedFamilies.includes(key) ? '1px solid var(--accent-green)' : '1px solid var(--border)',
                                                padding: '8px 16px'
                                            }}
                                            onClick={() => {
                                                if (selectedFamilies.includes(key)) {
                                                    setSelectedFamilies(selectedFamilies.filter(f => f !== key));
                                                } else {
                                                    setSelectedFamilies([...selectedFamilies, key]);
                                                }
                                            }}
                                        >
                                            {family.name}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <button className="btn btn-primary" onClick={handleGenerate}>
                            Generate Creatives
                        </button>
                    </div>

                    {generatedCreatives.length > 0 && (
                        <div className="card">
                            <div className="card-header">
                                <div>
                                    <h3 className="card-title">Generated Creatives</h3>
                                    <p className="card-subtitle">{generatedCreatives.length} hooks across {selectedFamilies.length} families</p>
                                </div>
                            </div>

                            {selectedFamilies.map(familyKey => {
                                const familyCreatives = generatedCreatives.filter(c => c.familyKey === familyKey);
                                if (familyCreatives.length === 0) return null;

                                return (
                                    <div key={familyKey} style={{ marginBottom: '32px' }}>
                                        <h4 style={{ marginBottom: '16px', color: 'var(--accent-blue)' }}>
                                            {hookFamilies[familyKey].name}
                                        </h4>

                                        {familyCreatives.map((creative, idx) => (
                                            <div key={creative.id} className="output-block">
                                                <div className="output-header">
                                                    <span className="output-title">Hook #{idx + 1}</span>
                                                    <button
                                                        className="copy-btn"
                                                        onClick={() => copyToClipboard(
                                                            `HOOK: ${creative.hook}\n\nTEXT ON SCREEN:\n${creative.textOnScreen.join('\n')}\n\nSCRIPT:\n${creative.script.hook}\n${creative.script.body}\n${creative.script.cta}\n\nDURATION: ${creative.script.duration}\nTONE: ${creative.script.tone}`,
                                                            creative.id
                                                        )}
                                                    >
                                                        {copiedIndex === creative.id ? '‚úì Copied' : 'Copy All'}
                                                    </button>
                                                </div>

                                                <div style={{ marginBottom: '16px' }}>
                                                    <div style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '4px' }}>HOOK</div>
                                                    <div style={{ fontSize: '16px', fontWeight: '600' }}>{creative.hook}</div>
                                                </div>

                                                <div style={{ marginBottom: '16px' }}>
                                                    <div style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '4px' }}>TEXT ON SCREEN</div>
                                                    {creative.textOnScreen.map((line, i) => (
                                                        <div key={i} style={{
                                                            padding: '8px 12px',
                                                            background: 'var(--bg-card)',
                                                            borderRadius: '4px',
                                                            marginBottom: '4px',
                                                            fontWeight: '500'
                                                        }}>
                                                            {line}
                                                        </div>
                                                    ))}
                                                </div>

                                                <div style={{ marginBottom: '16px' }}>
                                                    <div style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '4px' }}>SCRIPT</div>
                                                    <div style={{ fontSize: '14px', lineHeight: '1.6' }}>
                                                        <p style={{ marginBottom: '8px' }}><strong>Open:</strong> {creative.script.hook}</p>
                                                        <p style={{ marginBottom: '8px' }}><strong>Body:</strong> {creative.script.body}</p>
                                                        <p><strong>CTA:</strong> {creative.script.cta}</p>
                                                    </div>
                                                </div>

                                                <div style={{ display: 'flex', gap: '16px', fontSize: '13px', color: 'var(--text-secondary)' }}>
                                                    <span>Duration: {creative.script.duration}</span>
                                                    <span>Tone: {creative.script.tone}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                );
                            })}
                        </div>
                    )}
                </div>
            );
        }

        // Campaign Builder Page
        function CampaignBuilderPage({ data }) {
            const [selectedExperiment, setSelectedExperiment] = useState(data.experiments[0]?.id || '');
            const [selectedHookFamilies, setSelectedHookFamilies] = useState(['Pain Framing', 'Automation Framing', 'Loss Aversion']);
            const [campaignSpec, setCampaignSpec] = useState(null);
            const [copied, setCopied] = useState(false);

            const experiment = data.experiments.find(e => e.id === selectedExperiment);

            const handleGenerate = () => {
                if (experiment) {
                    setCampaignSpec(generateCampaignSpec(experiment, selectedHookFamilies));
                }
            };

            const copySpec = () => {
                navigator.clipboard.writeText(JSON.stringify(campaignSpec, null, 2));
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            return (
                <div>
                    <div className="page-header">
                        <h1 className="page-title">Campaign Builder</h1>
                        <p className="page-subtitle">Generate campaign structures for Meta & TikTok Ads</p>
                    </div>

                    <div className="card">
                        <h3 className="card-title" style={{ marginBottom: '16px' }}>Configuration</h3>

                        <div className="form-group">
                            <label className="form-label">Select Experiment</label>
                            <select
                                className="form-select"
                                value={selectedExperiment}
                                onChange={e => setSelectedExperiment(e.target.value)}
                            >
                                {data.experiments.map(exp => (
                                    <option key={exp.id} value={exp.id}>{exp.name}</option>
                                ))}
                            </select>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Hook Families to Include (as Ad Sets)</label>
                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                                {Object.values(hookFamilies).map(family => (
                                    <button
                                        key={family.name}
                                        className={`tag ${selectedHookFamilies.includes(family.name) ? 'tag-green' : ''}`}
                                        style={{
                                            cursor: 'pointer',
                                            border: selectedHookFamilies.includes(family.name) ? '1px solid var(--accent-green)' : '1px solid var(--border)',
                                            padding: '8px 16px'
                                        }}
                                        onClick={() => {
                                            if (selectedHookFamilies.includes(family.name)) {
                                                setSelectedHookFamilies(selectedHookFamilies.filter(f => f !== family.name));
                                            } else {
                                                setSelectedHookFamilies([...selectedHookFamilies, family.name]);
                                            }
                                        }}
                                    >
                                        {family.name}
                                    </button>
                                ))}
                            </div>
                        </div>

                        <button className="btn btn-primary" onClick={handleGenerate}>
                            Generate Campaign Spec
                        </button>
                    </div>

                    {campaignSpec && (
                        <div className="card">
                            <div className="card-header">
                                <div>
                                    <h3 className="card-title">Campaign Specification</h3>
                                    <p className="card-subtitle">Ready for manual setup or API integration</p>
                                </div>
                                <button className="copy-btn" onClick={copySpec}>
                                    {copied ? '‚úì Copied' : 'Copy JSON'}
                                </button>
                            </div>

                            <div className="grid-2">
                                <div>
                                    <h4 style={{ marginBottom: '12px', fontSize: '14px', color: 'var(--accent-blue)' }}>Campaign Details</h4>
                                    <div className="output-block">
                                        <div style={{ marginBottom: '12px' }}>
                                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>Campaign Name</div>
                                            <div style={{ fontFamily: 'monospace' }}>{campaignSpec.campaignName}</div>
                                        </div>
                                        <div style={{ marginBottom: '12px' }}>
                                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>Objective</div>
                                            <div>{campaignSpec.objective}</div>
                                        </div>
                                        <div style={{ marginBottom: '12px' }}>
                                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>Budget</div>
                                            <div>${campaignSpec.budget.amount}/day ({campaignSpec.budget.allocation})</div>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <h4 style={{ marginBottom: '12px', fontSize: '14px', color: 'var(--accent-blue)' }}>Naming Convention</h4>
                                    <div className="output-block">
                                        <div style={{ marginBottom: '8px', fontFamily: 'monospace', fontSize: '13px' }}>
                                            Campaign: {campaignSpec.namingConvention.campaign}
                                        </div>
                                        <div style={{ marginBottom: '8px', fontFamily: 'monospace', fontSize: '13px' }}>
                                            Ad Set: {campaignSpec.namingConvention.adSet}
                                        </div>
                                        <div style={{ fontFamily: 'monospace', fontSize: '13px' }}>
                                            Ad: {campaignSpec.namingConvention.ad}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h4 style={{ marginBottom: '12px', fontSize: '14px', color: 'var(--accent-blue)', marginTop: '24px' }}>Ad Sets</h4>
                            {campaignSpec.adSets.map((adSet, idx) => (
                                <div key={idx} className="output-block" style={{ marginBottom: '16px' }}>
                                    <div style={{ marginBottom: '12px' }}>
                                        <div style={{ fontWeight: '600' }}>{adSet.name}</div>
                                    </div>
                                    <div className="grid-2">
                                        <div>
                                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '4px' }}>Targeting</div>
                                            <div style={{ fontSize: '13px' }}>
                                                <div>{adSet.targeting.type}</div>
                                                <div style={{ color: 'var(--text-secondary)', marginTop: '4px' }}>
                                                    Interests: {adSet.targeting.interests.slice(0, 3).join(', ')}...
                                                </div>
                                                <div style={{ color: 'var(--text-secondary)' }}>
                                                    Age: {adSet.targeting.demographics.age}
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '4px' }}>Placements</div>
                                            <div style={{ display: 'flex', gap: '8px' }}>
                                                {adSet.placements.map(p => (
                                                    <span key={p} className="tag tag-blue">{p}</span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}

                            <h4 style={{ marginBottom: '12px', fontSize: '14px', color: 'var(--accent-yellow)', marginTop: '24px' }}>Rotation Rules</h4>
                            <div className="output-block">
                                <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                    {campaignSpec.rotationRules.map((rule, idx) => (
                                        <li key={idx} style={{ fontSize: '14px' }}>‚Ä¢ {rule}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Funnel Tracker Page
        function FunnelTrackerPage({ data, setData }) {
            const [selectedExperiment, setSelectedExperiment] = useState(data.experiments[0]?.id || '');
            const [formData, setFormData] = useState({
                date: new Date().toISOString().slice(0, 10),
                impressions: '',
                clicks: '',
                pageViews: '',
                aiInteractions: '',
                calcCompleted: '',
                conversions: '',
                spend: ''
            });
            const [hookData, setHookData] = useState({
                pain: { clicks: '', conversions: '' },
                automation: { clicks: '', conversions: '' },
                loss: { clicks: '', conversions: '' }
            });

            const experiment = data.experiments.find(e => e.id === selectedExperiment);
            const experimentFunnelData = data.funnelData.filter(f => f.experimentId === selectedExperiment);

            const handleSubmit = () => {
                const newFunnelEntry = {
                    id: `funnel_${Date.now()}`,
                    experimentId: selectedExperiment,
                    date: formData.date,
                    impressions: parseInt(formData.impressions) || 0,
                    clicks: parseInt(formData.clicks) || 0,
                    pageViews: parseInt(formData.pageViews) || 0,
                    aiInteractions: parseInt(formData.aiInteractions) || 0,
                    calcCompleted: parseInt(formData.calcCompleted) || 0,
                    conversions: parseInt(formData.conversions) || 0,
                    spend: parseFloat(formData.spend) || 0,
                    hookPerformance: {
                        'Pain Framing': { clicks: parseInt(hookData.pain.clicks) || 0, conversions: parseInt(hookData.pain.conversions) || 0 },
                        'Automation Framing': { clicks: parseInt(hookData.automation.clicks) || 0, conversions: parseInt(hookData.automation.conversions) || 0 },
                        'Loss Aversion': { clicks: parseInt(hookData.loss.clicks) || 0, conversions: parseInt(hookData.loss.conversions) || 0 }
                    }
                };

                const newData = {
                    ...data,
                    funnelData: [...data.funnelData, newFunnelEntry]
                };
                setData(newData);
                saveData(newData);

                // Reset form
                setFormData({
                    date: new Date().toISOString().slice(0, 10),
                    impressions: '', clicks: '', pageViews: '', aiInteractions: '',
                    calcCompleted: '', conversions: '', spend: ''
                });
                setHookData({
                    pain: { clicks: '', conversions: '' },
                    automation: { clicks: '', conversions: '' },
                    loss: { clicks: '', conversions: '' }
                });
            };

            // Calculate funnel metrics
            const latestFunnel = experimentFunnelData[experimentFunnelData.length - 1];
            const funnelSteps = latestFunnel ? [
                { name: 'Ad Impressions', value: latestFunnel.impressions, rate: '‚Äî' },
                { name: 'Ad Clicks', value: latestFunnel.clicks, rate: latestFunnel.impressions ? ((latestFunnel.clicks / latestFunnel.impressions) * 100).toFixed(2) + '%' : '‚Äî' },
                { name: 'Page Views', value: latestFunnel.pageViews, rate: latestFunnel.clicks ? ((latestFunnel.pageViews / latestFunnel.clicks) * 100).toFixed(2) + '%' : '‚Äî' },
                { name: 'AI Interactions', value: latestFunnel.aiInteractions, rate: latestFunnel.pageViews ? ((latestFunnel.aiInteractions / latestFunnel.pageViews) * 100).toFixed(2) + '%' : '‚Äî' },
                { name: 'Calc Completed', value: latestFunnel.calcCompleted, rate: latestFunnel.aiInteractions ? ((latestFunnel.calcCompleted / latestFunnel.aiInteractions) * 100).toFixed(2) + '%' : '‚Äî' },
                { name: 'Conversions', value: latestFunnel.conversions, rate: latestFunnel.calcCompleted ? ((latestFunnel.conversions / latestFunnel.calcCompleted) * 100).toFixed(2) + '%' : '‚Äî' }
            ] : [];

            return (
                <div>
                    <div className="page-header">
                        <h1 className="page-title">Funnel Tracker</h1>
                        <p className="page-subtitle">Log and visualize your conversion funnel</p>
                    </div>

                    <div className="grid-2">
                        <div className="card">
                            <h3 className="card-title" style={{ marginBottom: '16px' }}>Log Funnel Data</h3>

                            <div className="form-group">
                                <label className="form-label">Experiment</label>
                                <select
                                    className="form-select"
                                    value={selectedExperiment}
                                    onChange={e => setSelectedExperiment(e.target.value)}
                                >
                                    {data.experiments.map(exp => (
                                        <option key={exp.id} value={exp.id}>{exp.name}</option>
                                    ))}
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Date</label>
                                <input
                                    type="date"
                                    className="form-input"
                                    value={formData.date}
                                    onChange={e => setFormData({...formData, date: e.target.value})}
                                />
                            </div>

                            <div className="grid-2">
                                <div className="form-group">
                                    <label className="form-label">Impressions</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.impressions}
                                        onChange={e => setFormData({...formData, impressions: e.target.value})}
                                        placeholder="0"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Clicks</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.clicks}
                                        onChange={e => setFormData({...formData, clicks: e.target.value})}
                                        placeholder="0"
                                    />
                                </div>
                            </div>

                            <div className="grid-2">
                                <div className="form-group">
                                    <label className="form-label">Page Views</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.pageViews}
                                        onChange={e => setFormData({...formData, pageViews: e.target.value})}
                                        placeholder="0"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">AI Interactions</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.aiInteractions}
                                        onChange={e => setFormData({...formData, aiInteractions: e.target.value})}
                                        placeholder="0"
                                    />
                                </div>
                            </div>

                            <div className="grid-2">
                                <div className="form-group">
                                    <label className="form-label">Calc Completed</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.calcCompleted}
                                        onChange={e => setFormData({...formData, calcCompleted: e.target.value})}
                                        placeholder="0"
                                    />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">Conversions (Email + Phone)</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.conversions}
                                        onChange={e => setFormData({...formData, conversions: e.target.value})}
                                        placeholder="0"
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Ad Spend ($)</label>
                                <input
                                    type="number"
                                    className="form-input"
                                    value={formData.spend}
                                    onChange={e => setFormData({...formData, spend: e.target.value})}
                                    placeholder="0.00"
                                    step="0.01"
                                />
                            </div>

                            <h4 style={{ marginTop: '24px', marginBottom: '12px', fontSize: '14px' }}>Hook Family Breakdown (Optional)</h4>

                            {['pain', 'automation', 'loss'].map(family => (
                                <div key={family} className="grid-2" style={{ marginBottom: '8px' }}>
                                    <div className="form-group" style={{ marginBottom: '8px' }}>
                                        <label className="form-label" style={{ textTransform: 'capitalize' }}>{family} Clicks</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={hookData[family].clicks}
                                            onChange={e => setHookData({...hookData, [family]: {...hookData[family], clicks: e.target.value}})}
                                            placeholder="0"
                                        />
                                    </div>
                                    <div className="form-group" style={{ marginBottom: '8px' }}>
                                        <label className="form-label" style={{ textTransform: 'capitalize' }}>{family} Conv</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={hookData[family].conversions}
                                            onChange={e => setHookData({...hookData, [family]: {...hookData[family], conversions: e.target.value}})}
                                            placeholder="0"
                                        />
                                    </div>
                                </div>
                            ))}

                            <button className="btn btn-primary" style={{ marginTop: '16px' }} onClick={handleSubmit}>
                                Log Data
                            </button>
                        </div>

                        <div className="card">
                            <h3 className="card-title" style={{ marginBottom: '16px' }}>Funnel Visualization</h3>

                            {funnelSteps.length === 0 ? (
                                <div className="empty-state">
                                    <div className="empty-state-icon">üìä</div>
                                    <div className="empty-state-title">No funnel data yet</div>
                                    <p>Log your first day's metrics to see the funnel</p>
                                </div>
                            ) : (
                                <div>
                                    {funnelSteps.map((step, idx) => (
                                        <div key={idx} className="funnel-step">
                                            <div className="funnel-number">{idx + 1}</div>
                                            <div className="funnel-info">
                                                <div className="funnel-name">{step.name}</div>
                                                <div className="funnel-rate">Conv rate: {step.rate}</div>
                                            </div>
                                            <div className="funnel-value">{step.value.toLocaleString()}</div>
                                        </div>
                                    ))}

                                    {latestFunnel && (
                                        <div style={{ marginTop: '24px', padding: '16px', background: 'var(--bg-dark)', borderRadius: '8px' }}>
                                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                                <div>
                                                    <div style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>Cost Per Signup</div>
                                                    <div style={{ fontSize: '28px', fontWeight: '700', color: 'var(--accent-green)' }}>
                                                        ${latestFunnel.conversions ? (latestFunnel.spend / latestFunnel.conversions).toFixed(2) : '‚Äî'}
                                                    </div>
                                                </div>
                                                <div style={{ textAlign: 'right' }}>
                                                    <div style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>Target</div>
                                                    <div style={{ fontSize: '20px', fontWeight: '600' }}>
                                                        ${experiment?.budget.cpaTarget || 15}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>

                    {experimentFunnelData.length > 0 && (
                        <div className="card">
                            <h3 className="card-title" style={{ marginBottom: '16px' }}>Historical Data</h3>
                            <div className="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Impressions</th>
                                            <th>Clicks</th>
                                            <th>Page Views</th>
                                            <th>AI Int.</th>
                                            <th>Calc Comp.</th>
                                            <th>Conv.</th>
                                            <th>Spend</th>
                                            <th>CPA</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {experimentFunnelData.slice().reverse().map(entry => (
                                            <tr key={entry.id}>
                                                <td>{entry.date}</td>
                                                <td>{entry.impressions.toLocaleString()}</td>
                                                <td>{entry.clicks.toLocaleString()}</td>
                                                <td>{entry.pageViews.toLocaleString()}</td>
                                                <td>{entry.aiInteractions.toLocaleString()}</td>
                                                <td>{entry.calcCompleted.toLocaleString()}</td>
                                                <td>{entry.conversions}</td>
                                                <td>${entry.spend.toFixed(2)}</td>
                                                <td style={{ color: entry.conversions ? 'var(--accent-green)' : 'var(--text-secondary)' }}>
                                                    {entry.conversions ? `$${(entry.spend / entry.conversions).toFixed(2)}` : '‚Äî'}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Decision Engine Page
        function DecisionEnginePage({ data }) {
            const [selectedExperiment, setSelectedExperiment] = useState(data.experiments[0]?.id || '');
            const [analysis, setAnalysis] = useState(null);

            const experiment = data.experiments.find(e => e.id === selectedExperiment);
            const experimentFunnelData = data.funnelData.filter(f => f.experimentId === selectedExperiment);

            const handleAnalyze = () => {
                if (experiment) {
                    setAnalysis(analyzeResults(experimentFunnelData, experiment));
                }
            };

            const getVerdictStyle = (verdict) => {
                switch (verdict) {
                    case 'winner': return { color: 'var(--accent-green)', bg: 'rgba(0, 255, 136, 0.1)' };
                    case 'loser': return { color: 'var(--accent-red)', bg: 'rgba(255, 71, 87, 0.1)' };
                    case 'iterate': return { color: 'var(--accent-yellow)', bg: 'rgba(255, 217, 61, 0.1)' };
                    default: return { color: 'var(--text-secondary)', bg: 'var(--bg-dark)' };
                }
            };

            return (
                <div>
                    <div className="page-header">
                        <h1 className="page-title">Decision Engine</h1>
                        <p className="page-subtitle">Get actionable recommendations from your data</p>
                    </div>

                    <div className="card">
                        <h3 className="card-title" style={{ marginBottom: '16px' }}>Analyze Experiment</h3>

                        <div className="grid-2">
                            <div className="form-group">
                                <label className="form-label">Select Experiment</label>
                                <select
                                    className="form-select"
                                    value={selectedExperiment}
                                    onChange={e => setSelectedExperiment(e.target.value)}
                                >
                                    {data.experiments.map(exp => (
                                        <option key={exp.id} value={exp.id}>{exp.name}</option>
                                    ))}
                                </select>
                            </div>
                            <div style={{ display: 'flex', alignItems: 'flex-end' }}>
                                <button className="btn btn-primary" onClick={handleAnalyze}>
                                    Analyze Results
                                </button>
                            </div>
                        </div>

                        {experimentFunnelData.length === 0 && (
                            <div style={{ marginTop: '16px', padding: '16px', background: 'rgba(255, 217, 61, 0.1)', borderRadius: '8px', color: 'var(--accent-yellow)' }}>
                                No funnel data logged for this experiment yet. Log data in the Funnel Tracker first.
                            </div>
                        )}
                    </div>

                    {analysis && (
                        <>
                            <div className="card">
                                <div style={{
                                    padding: '24px',
                                    background: getVerdictStyle(analysis.verdict).bg,
                                    borderRadius: '8px',
                                    marginBottom: '24px'
                                }}>
                                    <div style={{
                                        fontSize: '14px',
                                        textTransform: 'uppercase',
                                        letterSpacing: '1px',
                                        marginBottom: '8px',
                                        color: 'var(--text-secondary)'
                                    }}>
                                        Verdict
                                    </div>
                                    <div style={{
                                        fontSize: '32px',
                                        fontWeight: '700',
                                        color: getVerdictStyle(analysis.verdict).color,
                                        textTransform: 'uppercase'
                                    }}>
                                        {analysis.verdict === 'insufficient_data' ? 'Insufficient Data' : analysis.verdict}
                                    </div>
                                    <div style={{ marginTop: '8px', color: 'var(--text-secondary)' }}>
                                        Confidence: {analysis.confidence}
                                    </div>
                                </div>

                                {analysis.metrics && (
                                    <div className="stats-grid" style={{ gridTemplateColumns: 'repeat(5, 1fr)' }}>
                                        <div className="stat-card">
                                            <div className="stat-label">CPA</div>
                                            <div className="stat-value">${analysis.metrics.cpa.toFixed(2)}</div>
                                        </div>
                                        <div className="stat-card">
                                            <div className="stat-label">CTR</div>
                                            <div className="stat-value">{analysis.metrics.ctr.toFixed(2)}%</div>
                                        </div>
                                        <div className="stat-card">
                                            <div className="stat-label">AI Engage</div>
                                            <div className="stat-value">{analysis.metrics.aiEngagement.toFixed(1)}%</div>
                                        </div>
                                        <div className="stat-card">
                                            <div className="stat-label">Calc Rate</div>
                                            <div className="stat-value">{analysis.metrics.calcCompletion.toFixed(1)}%</div>
                                        </div>
                                        <div className="stat-card">
                                            <div className="stat-label">Submit Rate</div>
                                            <div className="stat-value">{analysis.metrics.submitRate.toFixed(1)}%</div>
                                        </div>
                                    </div>
                                )}
                            </div>

                            <div className="grid-2">
                                <div className="card">
                                    <h3 className="card-title" style={{ marginBottom: '16px', color: 'var(--accent-blue)' }}>
                                        What We Learned
                                    </h3>
                                    <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                        {analysis.learnings.map((learning, idx) => (
                                            <li key={idx} style={{
                                                padding: '12px',
                                                background: 'var(--bg-dark)',
                                                borderRadius: '8px',
                                                fontSize: '14px',
                                                lineHeight: '1.5'
                                            }}>
                                                {learning}
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                <div className="card">
                                    <h3 className="card-title" style={{ marginBottom: '16px', color: 'var(--accent-green)' }}>
                                        Recommended Next Steps
                                    </h3>
                                    <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                        {analysis.recommendations.length === 0 ? (
                                            <li style={{
                                                padding: '12px',
                                                background: 'var(--bg-dark)',
                                                borderRadius: '8px',
                                                fontSize: '14px'
                                            }}>
                                                Continue running the experiment to gather more data.
                                            </li>
                                        ) : (
                                            analysis.recommendations.map((rec, idx) => (
                                                <li key={idx} style={{
                                                    padding: '12px',
                                                    background: 'rgba(0, 255, 136, 0.05)',
                                                    border: '1px solid rgba(0, 255, 136, 0.2)',
                                                    borderRadius: '8px',
                                                    fontSize: '14px',
                                                    lineHeight: '1.5'
                                                }}>
                                                    ‚Üí {rec}
                                                </li>
                                            ))
                                        )}
                                    </ul>
                                </div>
                            </div>

                            {analysis.hookPerformance && Object.keys(analysis.hookPerformance).length > 0 && (
                                <div className="card">
                                    <h3 className="card-title" style={{ marginBottom: '16px' }}>Hook Family Leaderboard</h3>
                                    <div className="table-container">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Hook Family</th>
                                                    <th>Clicks</th>
                                                    <th>Conversions</th>
                                                    <th>Conv Rate</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {Object.entries(analysis.hookPerformance)
                                                    .sort((a, b) => b[1].conversions - a[1].conversions)
                                                    .map(([family, data]) => (
                                                        <tr key={family}>
                                                            <td>{family}</td>
                                                            <td>{data.clicks}</td>
                                                            <td>{data.conversions}</td>
                                                            <td>{data.clicks > 0 ? ((data.conversions / data.clicks) * 100).toFixed(1) + '%' : '‚Äî'}</td>
                                                            <td>
                                                                {data.conversions > 0 ? (
                                                                    <span className="tag tag-green">Keep</span>
                                                                ) : data.clicks > 20 ? (
                                                                    <span className="tag tag-red">Kill</span>
                                                                ) : (
                                                                    <span className="tag tag-yellow">Testing</span>
                                                                )}
                                                            </td>
                                                        </tr>
                                                    ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            )}
                        </>
                    )}
                </div>
            );
        }

        // ========================================
        // MAIN APP
        // ========================================

        function App() {
            const [currentPage, setCurrentPage] = useState('dashboard');
            const [data, setData] = useState(loadData);

            const renderPage = () => {
                switch (currentPage) {
                    case 'dashboard':
                        return <DashboardPage data={data} setCurrentPage={setCurrentPage} />;
                    case 'experiments':
                        return <ExperimentsPage data={data} setData={setData} />;
                    case 'creatives':
                        return <CreativeEnginePage data={data} />;
                    case 'campaigns':
                        return <CampaignBuilderPage data={data} />;
                    case 'funnel':
                        return <FunnelTrackerPage data={data} setData={setData} />;
                    case 'decisions':
                        return <DecisionEnginePage data={data} />;
                    default:
                        return <DashboardPage data={data} setCurrentPage={setCurrentPage} />;
                }
            };

            return (
                <div className="app-container">
                    <Sidebar
                        currentPage={currentPage}
                        setCurrentPage={setCurrentPage}
                        experimentCount={data.experiments.length}
                    />
                    <div className="main-content">
                        {renderPage()}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
